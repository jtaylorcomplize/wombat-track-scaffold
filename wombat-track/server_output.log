
> wombat-track@0.1.0 admin-server
> tsx src/server/admin-server.ts 2

[DEBUG] Sidebar v3.1 rendering failure analysis: {
  "id": "of-admin-4.0-sidebar-v3.1-debug-20250803",
  "type": "debug_analysis",
  "event": "sidebar_rendering_failure",
  "entityId": "enhanced-sidebar-v3.1",
  "timestamp": "2025-08-07T01:47:40.618Z",
  "context": {
    "issue": "Enhanced Sidebar v3.1 not visible",
    "rootCause": "App.tsx using old AppRouter instead of OrbisRouter",
    "analysis": {
      "currentRouter": "AppRouter with /projects, /subapps routes",
      "expectedRouter": "OrbisRouter with /orbis/projects, /orbis/sub-apps routes",
      "currentSidebar": "EnhancedProjectSidebar v2.0",
      "expectedSidebar": "EnhancedSidebarV3 v3.1"
    },
    "impact": "Phase 3 QA blocked, UAT cannot proceed",
    "solution": "Update App.tsx to use OrbisRouter and OrbisLayout"
  }
}
[RESOLUTION] Sidebar v3.1 rendering and routing fixed: {
  "id": "of-admin-4.0-sidebar-v3.1-resolution-20250803",
  "type": "issue_resolution",
  "event": "sidebar_rendering_fixed",
  "entityId": "enhanced-sidebar-v3.1",
  "timestamp": "2025-08-07T01:47:40.618Z",
  "context": {
    "issue": "Enhanced Sidebar v3.1 not visible",
    "resolution": "Updated App.tsx to use OrbisRouter with proper BrowserRouter context",
    "changes": [
      "Added OrbisRouter import to App.tsx",
      "Changed return <AppRouter /> to return <OrbisRouter />",
      "Fixed NavigationContextProvider router context error",
      "Added BrowserRouter wrapper in OrbisRouter",
      "NavigationContextProvider now properly nested inside BrowserRouter"
    ],
    "technicalFixes": {
      "routing": "App.tsx:30 - return <OrbisRouter />",
      "context": "OrbisRouter.tsx:42-43 - <BrowserRouter><NavigationContextProvider>",
      "hierarchy": "BrowserRouter > NavigationContextProvider > Routes > OrbisLayout > EnhancedSidebarV3"
    },
    "verification": {
      "devServer": "Restarted on http://localhost:5173",
      "routing": "OrbisRouter with /orbis/* routes active",
      "components": "OrbisLayout and EnhancedSidebarV3 components loaded",
      "errors": "useLocation() router context error resolved"
    },
    "impact": "Phase 3 QA fully unblocked, UAT can proceed with Enhanced Sidebar v3.1"
  }
}
âœ… Enhanced Governance Logger: Server-side mode with full file logging
ğŸ” Registering admin API routes...
   âœ“ /api/admin/live/* - Live database CRUD operations
   âœ“ /api/admin/tables/* - Table data access
   âœ“ /api/admin/csv/* - CSV/JSON import/export operations
   âœ“ /api/admin/json/* - JSON import/export operations
   âœ“ /api/admin/import/* - SDLC canonical import operations
   âœ“ /api/secrets/gizmo/* - Gizmo OAuth2 secrets integration wizard
   âœ“ /api/admin/orphans/* - Orphan detection and repair
   âœ“ /api/admin/runtime/* - Runtime status monitoring
   âœ“ /api/mcp/gsuite/* - MCP GSuite integration (WT-MCPGS-1.0)
   âœ“ /api/admin/secrets/* - Secrets management (MCP credentials)
   âœ“ /api/admin/projects/:id - Project detail view
   âœ“ /api/admin/phases/:id - Phase detail view
   âœ“ /api/admin/edit/projects - Editable projects with draft/commit
   âœ“ /api/admin/edit/phases - Editable phases with draft/commit
   âœ“ /api/orbis/* - Cross-sub-app data aggregation (Enhanced Sidebar v3.1)
ğŸ—„ï¸  Database connection initialized
ğŸš€ Admin API Server running on http://localhost:3002
ğŸ” Serving admin endpoints for OF-BEV Phase 3
ğŸ“Š Available admin operations:
   â€¢ Data Explorer - Browse and edit database records
   â€¢ Import/Export - CSV and JSON data operations
   â€¢ Orphan Inspector - Detect and fix orphaned records
   â€¢ Runtime Panel - System health and job monitoring
ğŸ”— Test endpoints:
   GET  http://localhost:3002/health
   GET  http://localhost:3002/api/admin/tables/projects
   GET  http://localhost:3002/api/admin/runtime/status

ğŸ›‘ Admin server shutting down...
âœ… Server closed gracefully
