
> wombat-track@0.1.0 admin-server
> tsx src/server/admin-server.ts 2

[DEBUG] Sidebar v3.1 rendering failure analysis: {
  "id": "of-admin-4.0-sidebar-v3.1-debug-20250803",
  "type": "debug_analysis",
  "event": "sidebar_rendering_failure",
  "entityId": "enhanced-sidebar-v3.1",
  "timestamp": "2025-08-07T01:47:40.618Z",
  "context": {
    "issue": "Enhanced Sidebar v3.1 not visible",
    "rootCause": "App.tsx using old AppRouter instead of OrbisRouter",
    "analysis": {
      "currentRouter": "AppRouter with /projects, /subapps routes",
      "expectedRouter": "OrbisRouter with /orbis/projects, /orbis/sub-apps routes",
      "currentSidebar": "EnhancedProjectSidebar v2.0",
      "expectedSidebar": "EnhancedSidebarV3 v3.1"
    },
    "impact": "Phase 3 QA blocked, UAT cannot proceed",
    "solution": "Update App.tsx to use OrbisRouter and OrbisLayout"
  }
}
[RESOLUTION] Sidebar v3.1 rendering and routing fixed: {
  "id": "of-admin-4.0-sidebar-v3.1-resolution-20250803",
  "type": "issue_resolution",
  "event": "sidebar_rendering_fixed",
  "entityId": "enhanced-sidebar-v3.1",
  "timestamp": "2025-08-07T01:47:40.618Z",
  "context": {
    "issue": "Enhanced Sidebar v3.1 not visible",
    "resolution": "Updated App.tsx to use OrbisRouter with proper BrowserRouter context",
    "changes": [
      "Added OrbisRouter import to App.tsx",
      "Changed return <AppRouter /> to return <OrbisRouter />",
      "Fixed NavigationContextProvider router context error",
      "Added BrowserRouter wrapper in OrbisRouter",
      "NavigationContextProvider now properly nested inside BrowserRouter"
    ],
    "technicalFixes": {
      "routing": "App.tsx:30 - return <OrbisRouter />",
      "context": "OrbisRouter.tsx:42-43 - <BrowserRouter><NavigationContextProvider>",
      "hierarchy": "BrowserRouter > NavigationContextProvider > Routes > OrbisLayout > EnhancedSidebarV3"
    },
    "verification": {
      "devServer": "Restarted on http://localhost:5173",
      "routing": "OrbisRouter with /orbis/* routes active",
      "components": "OrbisLayout and EnhancedSidebarV3 components loaded",
      "errors": "useLocation() router context error resolved"
    },
    "impact": "Phase 3 QA fully unblocked, UAT can proceed with Enhanced Sidebar v3.1"
  }
}
✅ Enhanced Governance Logger: Server-side mode with full file logging
🔐 Registering admin API routes...
   ✓ /api/admin/live/* - Live database CRUD operations
   ✓ /api/admin/tables/* - Table data access
   ✓ /api/admin/csv/* - CSV/JSON import/export operations
   ✓ /api/admin/json/* - JSON import/export operations
   ✓ /api/admin/import/* - SDLC canonical import operations
   ✓ /api/secrets/gizmo/* - Gizmo OAuth2 secrets integration wizard
   ✓ /api/admin/orphans/* - Orphan detection and repair
   ✓ /api/admin/runtime/* - Runtime status monitoring
   ✓ /api/mcp/gsuite/* - MCP GSuite integration (WT-MCPGS-1.0)
   ✓ /api/admin/secrets/* - Secrets management (MCP credentials)
   ✓ /api/admin/projects/:id - Project detail view
   ✓ /api/admin/phases/:id - Phase detail view
   ✓ /api/admin/edit/projects - Editable projects with draft/commit
   ✓ /api/admin/edit/phases - Editable phases with draft/commit
   ✓ /api/orbis/* - Cross-sub-app data aggregation (Enhanced Sidebar v3.1)
🗄️  Database connection initialized
🚀 Admin API Server running on http://localhost:3002
🔐 Serving admin endpoints for OF-BEV Phase 3
📊 Available admin operations:
   • Data Explorer - Browse and edit database records
   • Import/Export - CSV and JSON data operations
   • Orphan Inspector - Detect and fix orphaned records
   • Runtime Panel - System health and job monitoring
🔗 Test endpoints:
   GET  http://localhost:3002/health
   GET  http://localhost:3002/api/admin/tables/projects
   GET  http://localhost:3002/api/admin/runtime/status

🛑 Admin server shutting down...
✅ Server closed gracefully
